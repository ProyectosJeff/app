import {Router} from 'express';import {pool} from '../db.js';import {authRequired} from '../middleware/auth.js';const r=Router();r.get('/progress',authRequired,async(_req,res)=>{try{const[rows]=await pool.query('SELECT usuario_modifica AS usuario, COUNT(*) AS codigos_avanzados FROM items WHERE usuario_modifica IS NOT NULL GROUP BY usuario_modifica ORDER BY codigos_avanzados DESC');res.json(rows);}catch(e){res.status(500).json({error:e.message});}});r.get('/status-summary',authRequired,async(_req,res)=>{try{const[rows]=await pool.query('SELECT estatus, COUNT(*) AS cantidad FROM items GROUP BY estatus');res.json(rows);}catch(e){res.status(500).json({error:e.message});}});export default r;
